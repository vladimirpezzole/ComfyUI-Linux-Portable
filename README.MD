
##  ğŸ“¦  "ComfyUI Linux Portable" para Linux

<hr>

### ConsideraÃ§Ãµes iniciais

Aqui vocÃª poderÃ¡ baixar um instalador para uma versÃ£o portÃ¡til do ComfyUI para Linux AMD64, ou instalar manualmente.
 *(ainda estou atualizando o instalador para multiplataforma como linux/arm64)*
 
TambÃ©m tem, na descriÃ§Ã£o abaixo, uma versÃ£o em testes mutliplataforma no DockerHub.

<hr>

<h5> ğŸ‹ Docker multiplataforma </h5>

> **VocÃª pode experimentar  essa versÃ£o Docker multiplataforma, ainda nÃ£o foi testada com Workflows mais complexos.**
> *Quando tiver feitos mais testes atualizo aqui...*
> **Os testes por enquanto foram feitos em um servidor Aways Free da Oracle, com processador ARM 4 nucleos e 24 de RAM 'sem GPU'.
> No teste foi usado o workflow padrÃ£o com o model '*v1-5-pruned-emaonly-fp16.safetensors*' em CPU, levou 5min para carregar e gerar a imagem e com o Custom-Nodes do Gemini em CPU** 
> *<small>(neste caso nÃ£o faz tanta diferenÃ§ajÃ¡ que quem paga a conta Ã© a Google)</small>*,  **foi em 6s.**
> **Link para acessar a imagem Docker no DockerHub >> https://hub.docker.com/r/vladimirpezzole/comfyui-multipla-clean**

<hr><hr>

### Baixe diretamente a versÃ£o com instalador do '*ComfyUI Linux Portable*' com  '*ComfyUI Manager*' *(recomendado)*...

```bash
git clone https://github.com/vladimirpezzole/ComfyUI-Linux-Portable.git
```

**Execute o Script:**
```bash
./install-comfyui-portable-linux.sh
```
**Caso dÃª erro torne o script executÃ¡vel (se nÃ£o estiver)**
```bash
chmod +x install-comfyui-portable-linux.sh
./install-comfyui-portable-linux.sh
```
**ApÃ³s o final siga as instruÃ§Ãµes e instale as dependÃªncias:**
<h5> [>> ğŸ’» **InstalaÃ§Ã£o das DependÃªncias de GPU** <<](#instalacao-gpu) </h5>



<hr>
<hr>

### âš™ï¸ ...caso der algum problema ğŸ™ˆğŸ˜¬ ou se preferir instale ManualmenteğŸ‘:

#### 1. Prepare a estrutura e clone o ComfyUI
```bash
mkdir ComfyUI_Linux_Portable
cd ComfyUI_Linux_Portable
git clone https://github.com/comfyanonymous/ComfyUI.git
```

#### 2. Instale o ComfyUI Manager
```bash
cd ComfyUI/custom_nodes/
git clone https://github.com/Comfy-Org/ComfyUI-Manager.git
cd ../..  # Volte para a pasta ComfyUI_Linux_Portable
```

#### 3. Configure o Python embutido
```bash
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh -b -p ./python_embeded
rm Miniconda3-latest-Linux-x86_64.sh  # Remove o instalador apÃ³s uso
```

#### 4. Ative o ambiente e instale dependÃªncias
```bash
source ./python_embeded/bin/activate
pip install -r ComfyUI/requirements.txt
```

<hr>

***

<a id="instalacao-gpu"></a>
## ğŸ’» InstalaÃ§Ã£o das DependÃªncias de GPU

**Certifique-se de estar no ambiente Conda:**
```bash
source ./python_embeded/bin/activate
```

#### ğŸ”µ **NVIDIA**
```bash
conda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia
```

#### ğŸ”´ **AMD**
```bash
pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/rocm6.0
```

#### ğŸŸ¡ **Mac ARM Silicon**
```bash
conda install pytorch-nightly::pytorch torchvision torchaudio -c pytorch-nightly
```

<hr>

***

## ğŸš€ Scripts de InicializaÃ§Ã£o Personalizados

### ğŸ“ Como criar seu script:

```bash
nano run.sh
```

### âš™ï¸ ParÃ¢metros disponÃ­veis:

| ParÃ¢metro       | Exemplo          | DescriÃ§Ã£o                                                                 |
|-----------------|------------------|---------------------------------------------------------------------------|
| `--port NUM`    | `--port 8190`    | Altera a porta padrÃ£o (Ãºtil para evitar conflitos com outros serviÃ§os)    |
| `--listen`      | `--listen`       | Habilita acesso via rede (permite conexÃµes remotas por IP)                |
| `--lowvram`     | `--lowvram`      | Modo otimizado para GPUs com memÃ³ria limitada (<=4GB VRAM)               |
| `--cpu`         | `--cpu`          | ForÃ§a a execuÃ§Ã£o usando apenas CPU (ignora GPU)                          |
| `--dont-upcast` | `--dont-upcast`  | Desativa upcasting de precisÃ£o (pode ajudar em GPUs antigas)              |

### ğŸ’» Exemplos PrÃ¡ticos:

**1. ConfiguraÃ§Ã£o para NVIDIA com 4GB VRAM:**
```bash
#!/bin/bash
export PYTHONPATH="$PWD"
source ./python_embeded/bin/activate
python ComfyUI/main.py --port 8190 --listen --lowvram
```

**2. ConfiguraÃ§Ã£o para CPU:**
```bash
#!/bin/bash
export PYTHONPATH="$PWD"
source ./python_embeded/bin/activate
python ComfyUI/main.py --port 8188 --cpu
```

**3. ConfiguraÃ§Ã£o avanÃ§ada (GPU dedicada + rede):**
```bash
#!/bin/bash
export PYTHONPATH="$PWD"
source ./python_embeded/bin/activate
python ComfyUI/main.py --port 8200 --listen --dont-upcast
```

### ğŸ”’ Tornando executÃ¡vel:
```bash
chmod +x run.sh  # DÃ¡ permissÃ£o de execuÃ§Ã£o
./run.sh         # Inicia o ComfyUI
```

ğŸ’¡ **Dica:** VocÃª pode criar mÃºltiplos scripts (ex: `run-gpu.sh`, `run-cpu.sh`) para diferentes configuraÃ§Ãµes!


### ğŸ—‚ Estrutura de Pastas Final
```
ComfyUI_Linux_Portable/
â”œâ”€â”€ ComfyUI/              # Arquivos principais
â”œâ”€â”€ python_embeded/       # Ambiente Python
â”œâ”€â”€ run.sh                # Script de inicializaÃ§Ã£o
â””â”€â”€ install-comfyui-portable-linux.sh # Script de instalaÃ§Ã£o
```

## ğŸ”„ ComparaÃ§Ã£o com Windows Portable
| Feature          | Windows           | Linux (esta versÃ£o) |
|------------------|-------------------|---------------------|
| Python           | Embebido          | Miniconda           |
| AtualizaÃ§Ã£o      | GitHub Releases   | git pull            |
| Modelos          | models/           | ComfyUI/models/     |


<br><hr>

## ğŸ’¡ Dicas Adicionais:
1. Para plugins adicionais:
```bash
source ./python_embeded/bin/activate
pip install timm==0.6.12 transformers==4.36.0
```

2. Para atualizar:
```bash
cd ComfyUI
git pull
pip install --upgrade -r requirements.txt
```

<hr>

***Fontes Oficiais:***  
ğŸ“Œ [www.comfy.org](https://www.comfy.org/download)  
ğŸ“Œ [Comfy-ui.org](https://comfy-ui.org/download)

ğŸ“Œ [ComfyUI GitHub](https://github.com/comfyanonymous/ComfyUI)  
ğŸ“Œ [ComfyUI Manager](https://github.com/Comfy-Org/ComfyUI-Manager)

******
